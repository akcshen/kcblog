(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{314:function(e,t,a){"use strict";var n=TypeError;e.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},342:function(e,t,a){"use strict";var n=a(47),r=a(5),i=a(127),s=a(314),o=URLSearchParams,h=o.prototype,u=r(h.append),c=r(h.delete),d=r(h.forEach),m=r([].push),f=new o("a=1&a=2&b=3");f.delete("a",1),f.delete("b",void 0),f+""!="a=2"&&n(h,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return c(this,e);var n=[];d(this,(function(e,t){m(n,{key:t,value:e})})),s(t,1);for(var r,o=i(e),h=i(a),f=0,l=0,p=!1,v=n.length;f<v;)r=n[f++],p||r.key===o?(p=!0,c(this,r.key)):l++;for(;l<v;)(r=n[l++]).key===o&&r.value===h||u(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},343:function(e,t,a){"use strict";var n=a(47),r=a(5),i=a(127),s=a(314),o=URLSearchParams,h=o.prototype,u=r(h.getAll),c=r(h.has),d=new o("a=1");!d.has("a",2)&&d.has("a",void 0)||n(h,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return c(this,e);var n=u(this,e);s(t,1);for(var r=i(a),o=0;o<n.length;)if(n[o++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},344:function(e,t,a){"use strict";var n=a(6),r=a(5),i=a(128),s=URLSearchParams.prototype,o=r(s.forEach);n&&!("size"in s)&&i(s,"size",{get:function(){var e=0;return o(this,(function(){e++})),e},configurable:!0,enumerable:!0})},368:function(e,t,a){},391:function(e,t,a){"use strict";a(368)},405:function(e,t,a){"use strict";a.r(t);a(342),a(343),a(344);var n={name:"CustomComment",data:()=>({isAdmin:!1,currentPath:"",iframeSrc:""}),watch:{$route(e,t){e.path!==t.path&&this.updateIframeSrc()}},mounted(){"undefined"!=typeof window&&(this.isAdmin="true"===localStorage.getItem("isAdmin")||new URLSearchParams(window.location.search).has("admin"),this.currentPath=this.getCleanPath(),this.updateIframeSrc(),window.$vuepress&&window.$vuepress.$on("routeChanged",this.handleRouteChange),window.addEventListener("vuepress-route-change",this.handleCustomRouteChange))},methods:{updateIframeSrc(){const e=this.getCleanPath();this.iframeSrc=this.createCommentPageUrl(e)},createCommentPageUrl(e){const t=Date.now();return`/comment-page.html?path=${encodeURIComponent(e)}&t=${t}`},getCleanPath(){if("undefined"==typeof window)return"";if(this.$frontmatter&&this.$frontmatter.commentid)return this.$frontmatter.commentid;let e=window.location.pathname;e.endsWith("/")&&(e=e.slice(0,-1));const t=this.$site&&this.$site.base?this.$site.base:"/";return"/"!==t&&e.startsWith(t)&&(e=e.slice(t.length-1)),e},refreshIframe(){this.updateIframeSrc()},handleRouteChange(e,t){e.path!==t.path&&(this.currentPath=this.getCleanPath(),this.updateIframeSrc())},handleCustomRouteChange(e){const{to:t,from:a}=e.detail;t.path!==a.path&&(this.currentPath=this.getCleanPath(),this.updateIframeSrc())}},beforeDestroy(){"undefined"!=typeof window&&(window.$vuepress&&window.$vuepress.$off("routeChanged",this.handleRouteChange),window.removeEventListener("vuepress-route-change",this.handleCustomRouteChange))}},r=(a(391),a(8)),i=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-comment"},[e.iframeSrc?t("iframe",{ref:"commentFrame",attrs:{src:e.iframeSrc,frameborder:"0",width:"100%",height:"300"}}):t("div",{staticClass:"loading-comments"},[e._v("加载评论中...")]),e._v(" "),e.isAdmin?t("div",{staticClass:"admin-tools"},[t("button",{on:{click:e.refreshIframe}},[e._v("刷新评论")]),e._v(" "),t("span",[e._v("当前路径: "+e._s(e.currentPath))])]):e._e()])}),[],!1,null,null,null);t.default=i.exports}}]);